<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Sunny the Queen</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ‘‘</text></svg>">
  <style>
    :root {
      --bg-1: #0f0a12;
      --bg-2: #221226;
      --bg-3: #351c3c;
      --rose-1: #f8d6e2;
      --rose-2: #f3a6c2;
      --rose-3: #df5f92;
      --rose-4: #b43f74;
      --gold-1: #f9e2a6;
      --gold-2: #e5b86f;
      --paper-1: #fff9f3;
      --paper-2: #fff1e6;
      --ink: #2a1630;
      --shadow: rgba(13, 6, 16, 0.45);
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body.letter-page {
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(180deg, var(--bg-1) 0%, var(--bg-2) 45%, var(--bg-3) 100%);
      font-family: "Cormorant Garamond", serif;
      color: #f8e9f2;
      overflow: hidden;
      touch-action: manipulation;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
    }

    .aurora {
      position: fixed;
      inset: -30% -20% auto -20%;
      height: 80vh;
      background: radial-gradient(circle at 20% 20%, rgba(248, 214, 226, 0.25), transparent 45%),
        radial-gradient(circle at 70% 30%, rgba(223, 95, 146, 0.28), transparent 55%),
        radial-gradient(circle at 50% 60%, rgba(180, 63, 116, 0.22), transparent 60%);
      filter: blur(20px);
      pointer-events: none;
      z-index: 0;
    }

    .stage {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -200%);
      width: min(76vw, 440px);
      height: min(34vh, 260px);
      z-index: 20;
      perspective: 2000px;
      opacity: 0;
      transition: transform 1.2s cubic-bezier(0.34, 1.2, 0.64, 1), opacity 0.8s ease;
    }

    .stage.landed {
      transform: translate(-50%, -50%);
      opacity: 1;
    }

    .envelope {
      position: relative;
      width: 100%;
      height: 100%;
      cursor: pointer;
      transform-style: preserve-3d;
      transition: transform 0.35s ease;
      touch-action: manipulation;
    }

    .envelope:hover {
      transform: translateY(-4px) scale(1.02);
    }

    .envelope.opened {
      cursor: default;
      transform: translateY(8px) scale(0.98);
    }

    .env-shadow {
      position: absolute;
      inset: 10% 8% -8% 8%;
      background: radial-gradient(circle, rgba(0, 0, 0, 0.35), transparent 60%);
      filter: blur(18px);
      z-index: 0;
    }

    .env-back {
      position: absolute;
      inset: 0;
      border-radius: 14px;
      background: linear-gradient(135deg, rgba(255, 248, 252, 0.98), rgba(255, 234, 244, 0.9));
      border: 1px solid rgba(249, 226, 166, 0.5);
      box-shadow: inset 0 2px 18px rgba(255, 255, 255, 0.8), 0 26px 45px rgba(180, 63, 116, 0.25);
      z-index: 1;
      transition: transform 0.8s ease, opacity 0.6s ease;
    }

    .envelope.opened .env-back {
      transform: scale(0.97);
      opacity: 0.75;
    }

    .env-front {
      position: absolute;
      bottom: -1px;
      left: -1%;
      width: 102%;
      height: 54%;
      background: linear-gradient(180deg, var(--rose-1), var(--rose-2), var(--rose-3));
      clip-path: polygon(0 0, 50% 100%, 100% 0, 100% 100%, 0 100%);
      box-shadow: inset 0 8px 18px rgba(255, 255, 255, 0.35), inset 0 -10px 18px rgba(0, 0, 0, 0.2);
      z-index: 3;
      transition: transform 0.8s ease;
    }

    .envelope.opened .env-front {
      transform: translateY(6px);
    }

    .env-flap {
      position: absolute;
      top: -1px;
      left: -1%;
      width: 102%;
      height: 56%;
      background: linear-gradient(180deg, var(--rose-4), var(--rose-3), var(--rose-1));
      clip-path: polygon(0 0, 50% 100%, 100% 0);
      transform-origin: top center;
      transition: transform 0.85s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25), inset 0 -2px 10px rgba(255, 255, 255, 0.35);
      z-index: 5;
    }

    .envelope.opened .env-flap {
      transform: rotateX(-180deg);
    }

    .env-seal {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 62px;
      height: 62px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.7), transparent 45%),
        radial-gradient(circle, var(--gold-1), var(--gold-2));
      box-shadow: 0 6px 18px rgba(180, 63, 116, 0.35), inset 0 2px 10px rgba(255, 255, 255, 0.6);
      display: grid;
      place-items: center;
      font-size: 26px;
      transition: transform 0.5s ease, opacity 0.5s ease;
      z-index: 6;
    }

    .env-seal::before {
      content: "ðŸ’–";
    }

    .envelope.opened .env-seal {
      opacity: 0;
      transform: translateX(-50%) scale(0) rotate(180deg);
    }

    .letter-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0);
      pointer-events: none;
      transition: background 0.5s ease;
      z-index: 40;
    }

    .letter-overlay.show {
      background: rgba(9, 5, 12, 0.7);
      pointer-events: auto;
    }

    .letter-paper {
      position: fixed;
      top: 50%;
      left: 50%;
      width: min(72vw, 600px);
      max-height: 34vh;
      transform: translate(-50%, -150%) scale(0.2);
      padding: 34px 30px;
      background:
        linear-gradient(180deg, rgba(255, 252, 246, 0.98), rgba(251, 238, 226, 0.98)),
        radial-gradient(circle at 18% 18%, rgba(231, 206, 175, 0.22), transparent 50%),
        radial-gradient(circle at 82% 20%, rgba(210, 170, 150, 0.18), transparent 55%),
        radial-gradient(circle at 50% 88%, rgba(195, 160, 145, 0.14), transparent 60%),
        repeating-linear-gradient(45deg, rgba(210, 188, 166, 0.06) 0 2px, transparent 2px 6px),
        repeating-linear-gradient(135deg, rgba(210, 188, 166, 0.04) 0 2px, transparent 2px 7px);
      border: 1px solid rgba(249, 226, 166, 0.55);
      border-radius: 18px;
      box-shadow:
        0 35px 90px var(--shadow),
        inset 0 2px 14px rgba(255, 255, 255, 0.9),
        inset 0 -16px 30px rgba(223, 95, 146, 0.08);
      opacity: 0;
      pointer-events: none;
      transition: transform 1.2s cubic-bezier(0.34, 1.2, 0.64, 1), opacity 0.8s ease;
      overflow: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
      -webkit-overflow-scrolling: touch;
      z-index: 60;
    }

    .letter-paper::-webkit-scrollbar {
      display: none;
    }

    .letter-paper::before {
      content: "";
      position: absolute;
      inset: 0;
      border: 1px dashed rgba(180, 63, 116, 0.3);
      border-radius: 18px;
      opacity: 0.7;
      pointer-events: none;
    }

    .letter-paper::after {
      content: "";
      position: absolute;
      top: 14px;
      right: 14px;
      width: 56px;
      height: 56px;
      border-radius: 12px;
      background:
        linear-gradient(135deg, rgba(249, 226, 166, 0.45), rgba(223, 95, 146, 0.25)),
        repeating-linear-gradient(45deg, rgba(255, 255, 255, 0.35) 0 6px, transparent 6px 12px);
      box-shadow: inset 0 2px 10px rgba(255, 255, 255, 0.6);
      opacity: 0.65;
      pointer-events: none;
    }

    .letter-paper.show {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
      pointer-events: auto;
      animation: letter-float 4s ease-in-out infinite;
    }

    .letter-text {
      white-space: pre-wrap;
      word-wrap: break-word;
      font-family: "Dancing Script", cursive;
      font-size: 20px;
      line-height: 2;
      color: var(--ink);
      font-weight: 500;
      display: block;
      background:
        repeating-linear-gradient(0deg, rgba(176, 150, 126, 0.1), rgba(176, 150, 126, 0.1) 1px, transparent 1px, transparent 34px);
      background-clip: padding-box;
      -webkit-user-select: text;
      user-select: text;
    }

    .letter-text {
      position: relative;
      z-index: 1;
    }

    @keyframes letter-float {
      0%, 100% {
        transform: translate(-50%, -50%) scale(1) translateY(0);
      }
      50% {
        transform: translate(-50%, -50%) scale(1) translateY(-10px);
      }
    }

    @media (max-width: 700px) {
      .stage {
        width: min(90vw, 380px);
        height: min(28vh, 200px);
      }

      .letter-paper {
        width: min(92vw, 500px);
        max-height: 70vh;
        padding: 24px 18px;
      }

      .letter-text {
        font-size: 17px;
        line-height: 1.85;
      }

      .env-seal {
        width: 56px;
        height: 56px;
        font-size: 24px;
      }

      .aurora {
        filter: blur(30px);
      }
    }

    @media (max-width: 480px) {
      .stage {
        width: min(92vw, 340px);
        height: min(25vh, 180px);
      }

      .letter-paper {
        width: min(94vw, 450px);
        max-height: 75vh;
        padding: 20px 16px;
      }

      .letter-text {
        font-size: 16px;
        line-height: 1.8;
      }

      .env-seal {
        width: 50px;
        height: 50px;
        font-size: 22px;
      }

      @keyframes letter-float {
        0%, 100% {
          transform: translate(-50%, -50%) scale(1) translateY(0);
        }
        50% {
          transform: translate(-50%, -50%) scale(1) translateY(-5px);
        }
      }
    }

    @media (prefers-reduced-motion: reduce) {
      .envelope,
      .letter-paper.show {
        animation: none;
        transition: none;
      }
    }
  </style>
</head>
<body class="letter-page">
  <audio id="bgMusic" autoplay loop playsinline>
    <source src="./src/sound.mp3" type="audio/mpeg">
  </audio>

  <div class="aurora" aria-hidden="true"></div>
  <div class="night"></div>

  <div class="bubbles" aria-hidden="true">
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
    <div class="bubble"><svg class="heart" viewBox="0 0 32 32"><title>heart</title><path d="M23.6 2c-3.363 0-6.258 2.736-7.599 5.594-1.342-2.858-4.237-5.594-7.601-5.594-4.637 0-8.4 3.764-8.4 8.401 0 9.433 9.516 11.906 16.001 21.232 6.13-9.268 15.999-12.1 15.999-21.232 0-4.637-3.763-8.401-8.4-8.401z"></path></svg></div>
  </div>

  <div class="letter-overlay" id="letterOverlay"></div>

  <div class="stage">
    <div class="envelope" id="envelopeWrapper" aria-label="Má»Ÿ thÆ°">
      <div class="env-shadow"></div>
      <div class="env-back"></div>
      <div class="env-front"></div>
      <div class="env-flap"></div>
      <div class="env-seal"></div>
    </div>
  </div>

  <div class="letter-paper" id="letterPaper">
    <div class="letter-text" id="letterText"></div>
  </div>

  <script>
    const letterContent = `Thanh HÃ³a, 14.02.2026

"ÄÃ¢y lÃ  Valentine Ä‘áº§u tiÃªn, anh vÃ  em cÃ³ nhau yÃªu nhau,
                                              sao em khÃ´ng á»Ÿ Ä‘Ã¢y bÃªn anh lÃºc nÃ y?"

YÃªu Æ¡i,

HÃ´m nay cá»§a cÃ´ng chÃºa tháº¿ nÃ o, tá»› nhá»› cáº­u muá»‘n cháº¿t, lÃ m sao Ä‘á»ƒ cáº­u hiá»ƒu Ä‘Æ°á»£c ná»—i nhá»› nÃ y lá»›n chá»«ng nÃ o Ä‘Ã¢y. Tá»› Æ°á»›c gÃ¬ mÃ¬nh cÃ³ thá»ƒ á»Ÿ bÃªn cáº­u mÃ£i nhÆ° váº­y, Ä‘Æ°á»£c náº±m hÃ­t hÃ  cáº­u, Ä‘Æ°á»£c thÆ¡m mÃ¡ cáº­u, Ä‘Æ°á»£c nhÃ¬n tháº¥y cáº­u má»—i sÃ¡ng. á»ž bÃªn cáº­u, náº±m cáº¡nh cáº­u, má»i thá»© tháº­t nháº¹ nhÃµm vÃ  bÃ¬nh yÃªn lÃ m sao.

CÅ©ng vÃ¬ váº­y mÃ  thá»‰nh thoáº£ng nghÄ© Ä‘áº¿n tá»› láº¡i sá»£, tá»› sá»£ máº¥t cáº­u láº¯m. Ná»—i sá»£ Ä‘Ã³ nhiá»u khi láº¡i khiáº¿n tá»› bá»‹ nháº¡y cáº£m quÃ¡ vÃ  cáº£ tá»©c giáº­n. Biáº¿t sao giá», tá»› chá»‰ muá»‘n tÃ¢m trÃ­ cáº­u dÃ nh riÃªng cho mÃ¬nh, muá»‘n cáº­u chá»‰ Ä‘Æ°á»£c nghÄ© vá» mÃ¬nh, muá»‘n cáº­u chá»n tá»› lÃ  ngÆ°á»i Ä‘á»ƒ chia sáº» Ä‘áº§u tiÃªn dÃ¹ lÃ  niá»m vui hay ná»—i buá»“n. HÃ£y cho tá»› Ä‘Æ°á»£c phÃ©p Ã­ch ká»· vá»›i tÃ¬nh cáº£m cá»§a cáº­u.

Má»i chuyá»‡n tháº­t ká»³ diá»‡u, tá»› tháº¥y tháº­t may máº¯n khi tháº¿ giá»›i Ä‘em cáº­u Ä‘áº¿n cho tá»›. ÄÃ¢y lÃ  valentine Ä‘áº§u tiÃªn cá»§a chÃºng mÃ¬nh nhá»‰, váº­y mÃ  láº¡i khÃ´ng Ä‘Æ°á»£c náº¯m tay nhau. NhÆ°ng khÃ´ng sao háº§y, tá»› Ä‘Ã£ nghÄ© 14 ngÃ y nÃ y nhÆ° honey moon cá»§a chÃºng mÃ¬nh. Thay vÃ¬ cÃ¹ng nhau Ä‘i du lá»‹ch, mÃ¬nh táº¡m xa nhau. Xa nhÆ° nÃ y Ä‘á»ƒ biáº¿t mÃ¬nh thÆ°Æ¡ng nhá»› nhau nhÆ°á»ng nÃ o, Ä‘á»ƒ tháº­t sá»± cáº£m nháº­n. Äá»ƒ khoáº£ng thá»i gian vá» sau, mÃ¬nh biáº¿t trÃ¢n trá»ng nhau hÆ¡n.

VÃ¬ thÆ°Æ¡ng cáº­u, mÃ  tá»› muá»‘n cáº­u biáº¿t, Ä‘áº¿n cÃ¢u chá»¯ cá»§a tá»› trong tÃ¢m thÆ° nÃ y, cÅ©ng ráº¥t yÃªu thÆ°Æ¡ng cáº­u!

ThÆ°Æ¡ng gá»­i,
NgÆ°á»i mÃ  cáº­u ghÃ©t nháº¥t`;

    const bgMusic = document.getElementById("bgMusic");
    if (bgMusic) {
      bgMusic.volume = 0.25;
    }

    // Mobile audio playback handler
    let audioPlayed = false;
    function tryPlayAudio() {
      if (!audioPlayed && bgMusic) {
        const playPromise = bgMusic.play();
        if (playPromise !== undefined) {
          playPromise
            .then(() => {
              audioPlayed = true;
            })
            .catch(() => {
              // Auto-play blocked, will retry on user interaction
            });
        }
      }
    }

    // Try to play on various user interactions (for mobile)
    document.addEventListener("touchstart", tryPlayAudio, { once: true });
    document.addEventListener("click", tryPlayAudio, { once: true });
    window.addEventListener("load", tryPlayAudio);

    // Envelope falling animation
    window.addEventListener("load", () => {
      const stage = document.querySelector(".stage");
      setTimeout(() => {
        stage.classList.add("landed");
      }, 100);
    });

    const envelopeWrapper = document.getElementById("envelopeWrapper");
    const letterOverlay = document.getElementById("letterOverlay");
    const letterPaper = document.getElementById("letterPaper");
    const letterText = document.getElementById("letterText");
    let isTyping = false;

    function typeWriter(text, element, speed = 30) {
      let i = 0;
      element.textContent = "";
      isTyping = true;

      function type() {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
          const delay = text.charAt(i - 1) === "\n" ? speed * 3 : speed;
          setTimeout(type, delay);
        } else {
          isTyping = false;
        }
      }

      type();
    }

    function openLetter() {
      if (envelopeWrapper.classList.contains("opened")) {
        return;
      }

      // Try to play audio on interaction (for mobile)
      tryPlayAudio();

      envelopeWrapper.classList.add("opened");
      setTimeout(() => {
        letterOverlay.classList.add("show");
        letterPaper.classList.add("show");
        setTimeout(() => {
          typeWriter(letterContent, letterText, 30);
        }, 320);
      }, 820);
    }

    function closeLetter() {
      if (isTyping) {
        return;
      }

      envelopeWrapper.classList.remove("opened");
      letterOverlay.classList.remove("show");
      letterPaper.classList.remove("show");
      letterText.textContent = "";
    }

    envelopeWrapper.addEventListener("click", openLetter);
    envelopeWrapper.addEventListener("touchend", (e) => {
      e.preventDefault();
      openLetter();
    }, { passive: false });
    
    letterOverlay.addEventListener("click", closeLetter);
    letterOverlay.addEventListener("touchend", (e) => {
      e.preventDefault();
      closeLetter();
    }, { passive: false });
    
    document.addEventListener("keydown", (event) => {
      if (event.key === "Escape") {
        closeLetter();
      }
    });
  </script>
</body>
</html>
